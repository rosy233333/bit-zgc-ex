(()=>{const t=localStorage;window;const l=document,H=FileReader,M=fetch,a=l.documentElement,n=l.body,z=l.head,r=e=>l.createElement(e),c=e=>new Image,i=(e,t,o)=>e["on"+t]=o,s=e=>e.getBoundingClientRect(),g=setTimeout,d=Math,D=URL,m="click",v="load",o="level",f="style",u="src",F="href",O="then",h="setAttribute",P="getAttribute",W="removeAttribute",G="referrer",p="data-";const J=p+"running",K=p+v+"ing",b="children",N="stopPropagation",Q="createObjectURL",w="display",x="innerHTML",y="width",$="height",V="left",R=0,A=2,X=1e3;const L="",Y="a",B="target",Z=/weibo|qq/i.test(navigator.userAgent),I=(e,t=l)=>t.querySelector(e);const _="bit-zgc-ex-levels",q=1134,C=A,ee=I("#地区");var te=I("#保存"),e=I("#输出");const oe=I("img",e),E=I("#设置等级"),S=r("canvas"),T=S.getContext("2d"),U=(S[y]=q*C,S[$]=q*C,n[b][2]),ne=E[b][R],j=E[f],le=e[f],ae=e=>{j[w]=L},re={},ce=e=>[...ee[b]],ie=e=>ce().map(e=>e[P](o)||R),se=e=>ie().join(L);i(ee,m,e=>{e[N]();var e=e[B],t=s(e),e=(re.省元素=e,ne[x]=e.id,j[w]="block",s(E)),o=d.round(a.scrollLeft+t[V]+t[y]/A-e[y]/A),o=d.min(o,n.offsetWidth-e[y]-6),t=(o=d.max(o,6),d.round(a.scrollTop+t.top+t[$]/A-e[$]/A)),t=d.min(t,n.offsetHeight-e[$]-6);t=d.max(t,6),j[V]=o+"px",j.top=t+"px"}),i(l,m,ae);const ge=e=>{var t=ie().reduce((e,t)=>e+(+t||R),R);分数[x]="分数: "+t};i(E,m,e=>{e[N]();e=e[B][P](p+o);e&&(re.省元素[h](o,e),ge(),ae(),t.setItem(_,se()))});{const fe=t.getItem(_)||L;ce().forEach((e,t)=>{e[h](o,fe[t]||R)})}ge();const de=(e,t)=>{var o=new H;i(o,v,e=>t(e[B].result)),o.readAsDataURL(e)};var k,me,ve;k="字体",me=e=>{console.log(I(f,U)),console.log(x);var t=r(f);t[x]=e,z.appendChild(t),g(e=>a[W](K),A*X)},ve=e=>me(`@font-face{font-family:${k};${u}:url(${e})}`),M(k+".woff?v=2uh3ut")[O](e=>e.blob())[O](e=>de(e,ve));i(te,m,e=>{a[h](J,!0),console.log(U[x]);var t=(e=>{e=new Blob([e],{type:"image/svg+xml"});return D[Q](e)})(`<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1134 976" ${y}="1134px" ${$}="976px">${U[x]}</svg>`);{var o=e=>{T.fillStyle="#efb4b4",T.fillRect(R,R,q*C,q*C),T.drawImage(e,R,R,q,976,R,158*C/A,q*C,976*C),S.toBlob(e=>{const l=D[Q](e);oe[u]=l,le[w]=L,g(e=>{var t,o,n;t=l,o="[神奇海螺][中国制霸].png",n=r(Y),Z||(n.download=o),n[F]=t,n[m](),a[W](J)},50)})};const n=c();i(n,v,e=>g(e=>o(n),X/A)),n[u]=t}c()[u]=`https://lab.magiconch.com/api/china-ex/log?levels=${se()}&r=`+l[G]}),i(I(Y,e),m,e=>{le[w]="none"})})();